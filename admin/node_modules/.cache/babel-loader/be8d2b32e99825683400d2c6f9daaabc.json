{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js!/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/add.vue","mtime":1678248479945},{"path":"/data/project/go/gin_vue_blog/admin/babel.config.js","mtime":1678248479925},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1704163415247},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1704163415131},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1704163415247},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1704163417120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZUFydGljbGUgfSBmcm9tICdAL2FwaS9hcnRpY2xlJzsKaW1wb3J0IHsgZ2V0VGFnTGlzdCB9IGZyb20gJ0AvYXBpL3RhZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5pdF90YWdfbGlzdDogW10sCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHNhdmVfZHJhZnRfaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIHN0YXR1czogMiwKICAgICAgICAvLyAxLeWPkeW4g++8jDIt6I2J56i/77yMMy3kuIvmnrYKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgdGFnX2xpc3Q6IFtdLAogICAgICAgIGRlc2M6ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdGl0bGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmtLvliqjlkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAzLAogICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMyDliLAgMjAg5Liq5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHRhZ19saXN0OiBbewogICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+iHs+WwkemAieaLqeS4gOS4quagh+etvicsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0VGFnTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFRhZ0xpc3Q6IGZ1bmN0aW9uIGluaXRUYWdMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBnZXRUYWdMaXN0KHsKICAgICAgICBwYWdlOiAtMQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmluaXRfdGFnX2xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBwdWJsaXNoOiBmdW5jdGlvbiBwdWJsaXNoKCkgewogICAgICB0aGlzLmZvcm0uc3RhdHVzID0gMTsKICAgICAgdGhpcy5zdWJtaXQoKTsKICAgIH0sCiAgICBzYXZlX2RyYWZ0OiBmdW5jdGlvbiBzYXZlX2RyYWZ0KCkgewogICAgICB0aGlzLnNhdmVfZHJhZnRfaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5mb3JtLnN0YXR1cyA9IDI7CiAgICAgIHRoaXMuc3VibWl0KCk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczIuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGNyZWF0ZUFydGljbGUoX3RoaXMyLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzMi50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhLmlkOwogICAgICAgICAgICBfdGhpczIuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzMi5zYXZlX2RyYWZ0X2lzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzcG9uc2UubXNnID09PSAnJykgewogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5YqfJywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLmdvKDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QAAA;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAJ,QACA;UAAAK;UAAAC;UAAAC;QAAA,GACA;UACAC;UACAC;UACAH;UACAC;QACA,EACA;QACAN,WACA;UACAS;UACAL;UACAC;UACAC;QACA;MAEA;IACA;EACA;EACAI;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QAAAC;MAAA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;UACAC;YACA;YACA;YACA;YACA;cACA;gBACAC;gBACAd;gBACAI;cACA;cACA;YACA;cACA;gBACAU;gBACAd;gBACAI;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["data","init_tag_list","isLoading","save_draft_isLoading","form","status","title","tag_list","desc","content","rules","required","message","trigger","min","max","type","created","methods","initTagList","getTagList","page","publish","save_draft","submit","createArticle","showClose"],"sourceRoot":"src/views/article","sources":["add.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"form.title\" />\n      </el-form-item>\n      <el-form-item label=\"选择标签\">\n        <el-checkbox-group v-model=\"form.tag_list\">\n          <el-checkbox\n            v-for=\"(tag, index) in init_tag_list\"\n            :key=\"index\"\n            :label=\"tag.id\"\n            name=\"tag\"\n          >\n            <el-tag type=\"success\">{{ tag.tag_name }}</el-tag>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <mavon-editor v-model=\"form.content\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          :loading=\"isLoading\"\n          @click=\"publish\"\n        >提交</el-button>\n        <el-button\n          type=\"warning\"\n          :loading=\"save_draft_isLoading\"\n          @click=\"save_draft\"\n        >存草稿</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { createArticle } from '@/api/article'\nimport { getTagList } from '@/api/tag'\nexport default {\n  data() {\n    return {\n      init_tag_list: [],\n      isLoading: false,\n      save_draft_isLoading: false,\n      form: {\n        status: 2, // 1-发布，2-草稿，3-下架\n        title: '',\n        tag_list: [],\n        desc: '',\n        content: ''\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\n          {\n            min: 3,\n            max: 50,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        tag_list: [\n          {\n            type: 'array',\n            required: true,\n            message: '请至少选择一个标签',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.initTagList()\n  },\n  methods: {\n    initTagList() {\n      getTagList({ page: -1 }).then((response) => {\n        this.init_tag_list = response.data\n      })\n    },\n    publish() {\n      this.form.status = 1\n      this.submit()\n    },\n    save_draft() {\n      this.save_draft_isLoading = true\n      this.form.status = 2\n      this.submit()\n    },\n    submit() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.isLoading = true\n          createArticle(this.form).then((response) => {\n            this.tableData = response.data.id\n            this.isLoading = false\n            this.save_draft_isLoading = false\n            if (response.msg === '') {\n              this.$message({\n                showClose: true,\n                message: '操作成功',\n                type: 'success'\n              })\n              this.$router.go(0)\n            } else {\n              this.$message({\n                showClose: true,\n                message: response.msg,\n                type: 'warning'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.line {\n  text-align: center;\n}\n</style>\n\n"]}]}