{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js!/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/tag/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/tag/list.vue","mtime":1678248479945},{"path":"/data/project/go/gin_vue_blog/admin/babel.config.js","mtime":1678248479925},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1704163415247},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1704163415131},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1704163415247},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1704163417120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFRhZ0xpc3QsIGVkaXRUYWcsIGFkZFRhZywgZGVsVGFnIH0gZnJvbSAnQC9hcGkvdGFnJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0b3RhbDogMTAwLAogICAgICBzZWFyY2g6ICcnLAogICAgICBlZGl0VGFnTmFtZTogJycsCiAgICAgIGN1cnJfcGFnZTogMQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyDliJ3lp4vljJbmlbDmja4KICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIGdldFRhZ0xpc3QoewogICAgICAgIHBhZ2U6IHRoaXMuY3Vycl9wYWdlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50UGFnZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudFBhZ2VDaGFuZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJfcGFnZSA9IHBhZ2U7CiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHRhZ0luZm8gPSB7CiAgICAgICAgaWQ6IHJvdy5pZAogICAgICB9OwogICAgICBkZWxUYWcodGFnSW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnRhYmxlRGF0YS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlrDlop4KICAgIGhhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy4kcHJvbXB0KCcnLCAn6K+36L6T5YWl5qCH562+5ZCN56ewJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHZhbHVlID0gX3JlZi52YWx1ZTsKICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfkuI3og73kuLrnqbonCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhZ0luZm8gPSB7CiAgICAgICAgICB0YWdfbmFtZTogdmFsdWUKICAgICAgICB9OwogICAgICAgIGFkZFRhZyh0YWdJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5YqfJwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyDliLfmlrDooajmoLwKICAgICAgICAgIGdldFRhZ0xpc3QoewogICAgICAgICAgICBwYWdlOiAxCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgX3RoaXMzLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIC8vIOe8lui+kQogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLiRwcm9tcHQoJycsICfor7fovpPlhaXmoIfnrb7lkI3np7AnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIHZhbHVlID0gX3JlZjIudmFsdWU7CiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJykgewogICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICBtZXNzYWdlOiAn5LiN6IO95Li656m6JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHZhciB0YWdJbmZvID0gewogICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgIHRhZ19uYW1lOiB2YWx1ZQogICAgICAgIH07CiAgICAgICAgZWRpdFRhZyh0YWdJbmZvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5YqfJwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczQudGFibGVEYXRhW2luZGV4XS50YWdfbmFtZSA9IHZhbHVlOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC;QAAAC;MAAA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;MACA;MACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACAC;QACAC;MACA,GACAC;QAAA;QACA;UACA;YACAC;YACAC;UACA;QACA;QACA;UACAC;QACA;QACAC;UACA;YACAH;YACAC;UACA;UACA;UACAX;YAAAC;UAAA;YACA;YACA;UACA;QACA;MACA,GACAa;IACA;IACA;IACAC;MAAA;MACA;QACAR;QACAC;MACA,GACAC;QAAA;QACA;UACA;YACAC;YACAC;UACA;QACA;QACA;UACAP;UACAQ;QACA;QACAI;UACA;YACAN;YACAC;UACA;UACA;QACA;MACA,GACAG;IACA;EACA;AACA","names":["data","tableData","total","search","editTagName","curr_page","created","methods","fetchData","getTagList","page","handleCurrentPageChange","handleDelete","id","delTag","handleAdd","confirmButtonText","cancelButtonText","then","type","message","tag_name","addTag","catch","handleEdit","editTag"],"sourceRoot":"src/views/tag","sources":["list.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n      <el-button type=\"primary\" @click=\"handleAdd\">添加新标签</el-button>\n    </el-row>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column label=\"Id\" prop=\"id\" />\n      <el-table-column label=\"标签名称\" prop=\"tag_name\" />\n      <el-table-column label=\"文章数量\" prop=\"article_sum\" />\n      <el-table-column align=\"right\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"text\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          >编辑</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          >Delete</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      @current-change=\"handleCurrentPageChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport { getTagList, editTag, addTag, delTag } from '@/api/tag'\n\nexport default {\n  data() {\n    return {\n      tableData: [],\n      total: 100,\n      search: '',\n      editTagName: '',\n      curr_page: 1\n    }\n  },\n  created() {\n    // 初始化数据\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getTagList({ page: this.curr_page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    handleCurrentPageChange(page) {\n      this.curr_page = page\n      this.fetchData()\n    },\n    handleDelete(index, row) {\n      const tagInfo = {\n        id: row.id\n      }\n      delTag(tagInfo).then((res) => {\n        this.tableData.splice(index, 1)\n      })\n    },\n    // 新增\n    handleAdd() {\n      this.$prompt('', '请输入标签名称', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      })\n        .then(({ value }) => {\n          if (value === null || value === '') {\n            this.$message({\n              type: 'info',\n              message: '不能为空'\n            })\n          }\n          const tagInfo = {\n            tag_name: value\n          }\n          addTag(tagInfo).then((response) => {\n            this.$message({\n              type: 'success',\n              message: '成功'\n            })\n            // 刷新表格\n            getTagList({ page: 1 }).then((response) => {\n              this.tableData = response.data\n              this.listLoading = false\n            })\n          })\n        })\n        .catch(() => {})\n    },\n    // 编辑\n    handleEdit(index, row) {\n      this.$prompt('', '请输入标签名称', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      })\n        .then(({ value }) => {\n          if (value === null || value === '') {\n            this.$message({\n              type: 'info',\n              message: '不能为空'\n            })\n          }\n          const tagInfo = {\n            id: row.id,\n            tag_name: value\n          }\n          editTag(tagInfo).then((response) => {\n            this.$message({\n              type: 'success',\n              message: '成功'\n            })\n            this.tableData[index].tag_name = value\n          })\n        })\n        .catch(() => {})\n    }\n  }\n}\n</script>\n"]}]}