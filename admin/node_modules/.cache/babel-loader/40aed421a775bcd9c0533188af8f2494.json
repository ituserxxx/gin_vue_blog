{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js!/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/img/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/img/add.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/babel.config.js","mtime":1669962015047},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1669962132195},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEFydGljbGVMaXN0LCBkcmFmdEFydGljbGUsIHB1Ymxpc2hBcnRpY2xlLCBkZWxldGVBcnRpY2xlIH0gZnJvbSAnQC9hcGkvYXJ0aWNsZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgLy8g5re75Yqg5bGe5oCn77yM6buY6K6k5YC85Li6ZmFsc2Us6KGo56S65by55qGG5LiN5pi+56S6CiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvLyAyLuiuvue9ruaWh+S7tuWIl+ihqOWxnuaAp2F0dGFjaExpc3Qs6ZyA6KaB57uR5a6a5YiwPGVsLXVwbG9hZD7lhYPntKDkuIrjgILpu5jorqTlgLzkuLrnqbrmlbDnu4TvvIzooajnpLrmlofku7bliJfooajkuLrnqboKICAgICAgYXR0YWNoTGlzdDogW10sCiAgICAgIHRvdGFsOiAxMDAsCiAgICAgIHNlYXJjaDogJycKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0QXJ0aWNsZUxpc3QoewogICAgICAgIHBhZ2U6IHRoaXMucGFnZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudFBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRQYWdlQ2hhbmdlKHBhZ2UpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGdldEFydGljbGVMaXN0KHsKICAgICAgICBwYWdlOiBwYWdlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMyLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe8lui+kei3s+i9rAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChpbmRleCwgcm93KSB7CiAgICAgIC8vIOmAmui/h3B1c2jov5vooYzot7PovawKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvYXJ0aWNsZS9lZGl0JywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHJvdy5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5paw5aKe6Lez6L2sCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgLy8g6YCa6L+HcHVzaOi/m+ihjOi3s+i9rAogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9hcnRpY2xlL2FkZCcKICAgICAgfSk7CiAgICB9LAogICAgLy8g5a2Y5YWl6I2J56i/CiAgICBoYW5kbGVTYXZlRHJhZnQ6IGZ1bmN0aW9uIGhhbmRsZVNhdmVEcmFmdChpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgYXJ0aWNsZUluZm8gPSB7CiAgICAgICAgaWQ6IHJvdy5pZAogICAgICB9OwogICAgICBkcmFmdEFydGljbGUoYXJ0aWNsZUluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1zZyA/IHJlc3BvbnNlLm1zZyA6ICfmiJDlip8nCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLmZldGNoRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVQdWJsaXNoQXJ0aWNsZTogZnVuY3Rpb24gaGFuZGxlUHVibGlzaEFydGljbGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIGFydGljbGVJbmZvID0gewogICAgICAgIGlkOiByb3cuaWQKICAgICAgfTsKICAgICAgcHVibGlzaEFydGljbGUoYXJ0aWNsZUluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1zZyA/IHJlc3BvbnNlLm1zZyA6ICfmiJDlip8nCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXM0LmZldGNoRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB2YXIgYXJ0aWNsZUluZm8gPSB7CiAgICAgICAgYXJ0aWNsZV9pZDogcm93LmlkCiAgICAgIH07CiAgICAgIGRlbGV0ZUFydGljbGUoYXJ0aWNsZUluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1zZyA/IHJlc3BvbnNlLm1zZyA6ICfmiJDlip8nCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXM1LmZldGNoRGF0YSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA,SACAA,gBACAC,cACAC,gBACAC,qBACA;AAEA;EACAC;IACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAZ;QAAAa;MAAA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACAd;QAAAa;MAAA;QACA;QACA;MACA;IACA;IACA;IACAE;MACA;MACA;QACAC;QACAC;UAAAC;QAAA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAH;MACA;IACA;IACA;IACAI;MAAA;MACA;QACAF;MACA;MACAjB;QACA;UACAoB;UACAC;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAL;MACA;MACAhB;QACA;UACAmB;UACAC;QACA;QACA;MACA;IACA;IACAE;MAAA;MACA;QACAC;MACA;MACAtB;QACA;UACAkB;UACAC;QACA;QACA;MACA;IACA;EACA;AACA","names":["getArticleList","draftArticle","publishArticle","deleteArticle","data","tableData","dialogVisible","attachList","total","search","created","methods","fetchData","page","handleCurrentPageChange","handleEdit","path","query","id","handleAdd","handleSaveDraft","type","message","handlePublishArticle","handleDelete","article_id"],"sourceRoot":"src/views/img","sources":["add.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n      <el-button type=\"primary\" @click=\"handleAdd\">新增文章</el-button>\n    </el-row>\n\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column label=\"Id\" prop=\"id\" />\n      <el-table-column label=\"标题\" prop=\"title\" />\n      <el-table-column label=\"创建时间\" prop=\"create_time\" />\n      <el-table-column label=\"更新时间\" prop=\"update_time\" />\n      <el-table-column label=\"状态\" prop=\"status\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.status === 1\" type=\"success\"> 已发布</el-tag>\n          <el-tag v-if=\"scope.row.status === 2\" type=\"warning\"> 草稿 </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\" align=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          >编辑</el-button>\n\n          <el-button\n            v-if=\"scope.row.status == 1\"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"handleSaveDraft(scope.$index, scope.row)\"\n          >存草稿</el-button>\n\n          <el-button\n            v-if=\"scope.row.status == 2\"\n            size=\"medium\"\n            type=\"success\"\n            @click=\"handlePublishArticle(scope.$index, scope.row)\"\n          >发布</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"attach\" label=\"附件管理\" width=\"180\">\n        <template>\n          <el-button\n            size=\"small\"\n            type=\"primary\"\n            @click=\"dialogVisible = true\"\n          >上传<i class=\"el-icon-upload el-icon--right\" /></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n     <el-dialog\n        title=\"提示\"\n        :visible.sync=\"dialogVisible\"\n        width=\"30%\">\n         <el-upload\n            class=\"upload-demo\"\n            drag\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\n            :file-list=\"attachList\">\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n            <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\n          </el-upload>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n　　　　　 <!-- 3.表格中的上传按钮绑定click事件，触发点击事件将dialogVisible设置为true，弹框显示。 -->\n          <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\n        </span>\n      </el-dialog>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      @current-change=\"handleCurrentPageChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport {\n  getArticleList,\n  draftArticle,\n  publishArticle,\n  deleteArticle\n} from '@/api/article'\n\nexport default {\n  data() {\n    return {\n      tableData: [],\n      // 添加属性，默认值为false,表示弹框不显示\n      dialogVisible: false,\n      // 2.设置文件列表属性attachList,需要绑定到<el-upload>元素上。默认值为空数组，表示文件列表为空\n      attachList: [],\n      total: 100,\n      search: ''\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getArticleList({ page: this.page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    handleCurrentPageChange(page) {\n      getArticleList({ page: page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    // 编辑跳转\n    handleEdit(index, row) {\n      // 通过push进行跳转\n      this.$router.push({\n        path: '/article/edit',\n        query: { id: row.id }\n      })\n    },\n    // 新增跳转\n    handleAdd() {\n      // 通过push进行跳转\n      this.$router.push({\n        path: '/article/add'\n      })\n    },\n    // 存入草稿\n    handleSaveDraft(index, row) {\n      const articleInfo = {\n        id: row.id\n      }\n      draftArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    },\n    handlePublishArticle(index, row) {\n      const articleInfo = {\n        id: row.id\n      }\n      publishArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    },\n    handleDelete(index, row) {\n      const articleInfo = {\n        article_id: row.id\n      }\n      deleteArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    }\n  }\n}\n</script>\n"]}]}