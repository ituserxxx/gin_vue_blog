{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js!/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/babel.config.js","mtime":1669962015047},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1669962132195},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVkaXRBcnRpY2xlLCBkZXRhaWxBcnRpY2xlIH0gZnJvbSAnQC9hcGkvYXJ0aWNsZSc7CmltcG9ydCB7IGdldFRhZ0xpc3QgfSBmcm9tICdAL2FwaS90YWcnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGluaXRfdGFnX2xpc3Q6IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHRhZ19saXN0OiBbXSwKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBjcmVhdGVfdGltZTogJycsCiAgICAgICAgdXBkYXRlX3RpbWU6ICcnLAogICAgICAgIGFydGljbGVfaWQ6IDAsCiAgICAgICAgaHRtbDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpea0u+WKqOWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDMsCiAgICAgICAgICBtYXg6IDUwLAogICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCAyMCDkuKrlrZfnrKYnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgdGFnX2xpc3Q6IFt7CiAgICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA5Liq5qCH562+JywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICB0aGlzLmluaXRUYWdMaXN0KCk7CiAgICB0aGlzLmdldERldGFpbCh0aGlzLiRyb3V0ZS5xdWVyeS5pZCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0VGFnTGlzdDogZnVuY3Rpb24gaW5pdFRhZ0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGdldFRhZ0xpc3QoewogICAgICAgIHBhZ2U6IDEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5pbml0X3RhZ19saXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGV0YWlsOiBmdW5jdGlvbiBnZXREZXRhaWwoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGRldGFpbEFydGljbGUoewogICAgICAgIGFydGljbGVfaWQ6IE51bWJlcihpZCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMyLmZvcm0uYXJ0aWNsZV9pZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgX3RoaXMyLmZvcm0udGl0bGUgPSByZXNwb25zZS5kYXRhLnRpdGxlOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhZ19saXN0ICE9IG51bGwpIHsKICAgICAgICAgIF90aGlzMi5mb3JtLnRhZ19saXN0ID0gcmVzcG9uc2UuZGF0YS50YWdfbGlzdDsKICAgICAgICB9CiAgICAgICAgX3RoaXMyLmZvcm0uY29udGVudCA9IHJlc3BvbnNlLmRhdGEuY29udGVudDsKICAgICAgICBfdGhpczIuZm9ybS5jcmVhdGVfdGltZSA9IHJlc3BvbnNlLmRhdGEuY3JlYXRlX3RpbWU7CiAgICAgICAgX3RoaXMyLmZvcm0udXBkYXRlX3RpbWUgPSByZXNwb25zZS5kYXRhLnVwZGF0ZV90aW1lOwogICAgICB9KTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGVkaXRBcnRpY2xlKF90aGlzMy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9PSAnJykgewogICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmiJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAP,QACA;UAAAQ;UAAAC;UAAAC;QAAA,GACA;UACAC;UACAC;UACAH;UACAC;QACA,EACA;QACAT,WACA;UACAY;UACAL;UACAC;UACAC;QACA;MAEA;IACA;EACA;EACAI;IACA;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QAAAC;MAAA;QACA;MACA;IACA;IACAC;MAAA;MACAC;QAAAf;MAAA;QACA;QACA;QACA;QACA;UACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAgB;MAAA;MACA;QACA;UACA;UACAC;YACA;YACA;cACA;gBACAC;gBACAd;gBACAI;cACA;YACA;cACA;gBACAU;gBACAd;gBACAI;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["data","isLoading","init_tag_list","form","title","tag_list","content","create_time","update_time","article_id","html","rules","required","message","trigger","min","max","type","created","methods","initTagList","getTagList","page","getDetail","detailArticle","onSubmit","editArticle","showClose"],"sourceRoot":"src/views/article","sources":["edit.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n      <el-input v-show=\"false\" v-model=\"form.article_id\" />\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"form.title\" />\n      </el-form-item>\n      <el-form-item label=\"选择标签\">\n        <el-checkbox-group v-model=\"form.tag_list\">\n          <el-checkbox\n            v-for=\"(tag, index) in init_tag_list\"\n            :key=\"index\"\n            :label=\"tag.id\"\n            name=\"tag\"\n          >\n            <el-tag type=\"success\">{{ tag.tag_name }}</el-tag>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"创建时间\">\n        <el-date-picker\n          v-model=\"form.create_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"最近更新时间\">\n        <el-date-picker\n          v-model=\"form.update_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <mavon-editor v-model=\"form.content\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          :loading=\"isLoading\"\n          @click=\"onSubmit\"\n        >提交</el-button>\n        <el-button>取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { editArticle, detailArticle } from '@/api/article'\nimport { getTagList } from '@/api/tag'\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      init_tag_list: [],\n      form: {\n        title: '',\n        tag_list: [],\n        content: '',\n        create_time: '',\n        update_time: '',\n        article_id: 0,\n        html: ''\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\n          {\n            min: 3,\n            max: 50,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        tag_list: [\n          {\n            type: 'array',\n            required: true,\n            message: '请至少选择一个标签',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.isLoading = true\n    this.initTagList()\n    this.getDetail(this.$route.query.id)\n  },\n  methods: {\n    initTagList() {\n      getTagList({ page: 1 }).then((response) => {\n        this.init_tag_list = response.data\n      })\n    },\n    getDetail(id) {\n      detailArticle({ article_id: Number(id) }).then((response) => {\n        this.isLoading = false\n        this.form.article_id = response.data.id\n        this.form.title = response.data.title\n        if (response.data.tag_list != null) {\n          this.form.tag_list = response.data.tag_list\n        }\n        this.form.content = response.data.content\n        this.form.create_time = response.data.create_time\n        this.form.update_time = response.data.update_time\n      })\n    },\n    onSubmit() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.isLoading = true\n          editArticle(this.form).then((response) => {\n            this.isLoading = false\n            if (response.data !== '') {\n              this.$message({\n                showClose: true,\n                message: response.data,\n                type: 'primary'\n              })\n            } else {\n              this.$message({\n                showClose: true,\n                message: '成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.line {\n  text-align: center;\n}\n</style>\n\n"]}]}