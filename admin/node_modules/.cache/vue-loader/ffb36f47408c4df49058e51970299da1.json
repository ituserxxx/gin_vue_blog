{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue?vue&type=style&index=0&id=677ecf1d&scoped=true&lang=css&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/css-loader/dist/cjs.js","mtime":1669962138838},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1669962134142},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/postcss-loader/src/index.js","mtime":1669962132179},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubGluZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n      <el-input v-show=\"false\" v-model=\"form.article_id\" />\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"form.title\" />\n      </el-form-item>\n      <el-form-item label=\"选择标签\">\n        <el-checkbox-group v-model=\"form.tag_list\">\n          <el-checkbox\n            v-for=\"(tag, index) in init_tag_list\"\n            :key=\"index\"\n            :label=\"tag.id\"\n            name=\"tag\"\n          >\n            <el-tag type=\"success\">{{ tag.tag_name }}</el-tag>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"创建时间\">\n        <el-date-picker\n          v-model=\"form.create_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"最近更新时间\">\n        <el-date-picker\n          v-model=\"form.update_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <mavon-editor v-model=\"form.content\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          :loading=\"isLoading\"\n          @click=\"onSubmit\"\n        >提交</el-button>\n        <el-button>取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { editArticle, detailArticle } from '@/api/article'\nimport { getTagList } from '@/api/tag'\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      init_tag_list: [],\n      form: {\n        title: '',\n        tag_list: [],\n        content: '',\n        create_time: '',\n        update_time: '',\n        article_id: 0,\n        html: ''\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\n          {\n            min: 3,\n            max: 50,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        tag_list: [\n          {\n            type: 'array',\n            required: true,\n            message: '请至少选择一个标签',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.isLoading = true\n    this.initTagList()\n    this.getDetail(this.$route.query.id)\n  },\n  methods: {\n    initTagList() {\n      getTagList({ page: 1 }).then((response) => {\n        this.init_tag_list = response.data\n      })\n    },\n    getDetail(id) {\n      detailArticle({ article_id: Number(id) }).then((response) => {\n        this.isLoading = false\n        this.form.article_id = response.data.id\n        this.form.title = response.data.title\n        if (response.data.tag_list != null) {\n          this.form.tag_list = response.data.tag_list\n        }\n        this.form.content = response.data.content\n        this.form.create_time = response.data.create_time\n        this.form.update_time = response.data.update_time\n      })\n    },\n    onSubmit() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.isLoading = true\n          editArticle(this.form).then((response) => {\n            this.isLoading = false\n            if (response.data !== '') {\n              this.$message({\n                showClose: true,\n                message: response.data,\n                type: 'primary'\n              })\n            } else {\n              this.$message({\n                showClose: true,\n                message: '成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.line {\n  text-align: center;\n}\n</style>\n\n"]}]}