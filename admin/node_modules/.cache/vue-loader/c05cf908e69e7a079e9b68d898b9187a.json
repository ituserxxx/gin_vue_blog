{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/add.vue?vue&type=style&index=0&id=169253de&scoped=true&lang=css&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/add.vue","mtime":1678248479945},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/css-loader/dist/cjs.js","mtime":1704163415404},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1704163417120},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/postcss-loader/src/index.js","mtime":1704163416464},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1704163415247},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1704163417120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5saW5lIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0K"},{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA","file":"add.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"form.title\" />\n      </el-form-item>\n      <el-form-item label=\"选择标签\">\n        <el-checkbox-group v-model=\"form.tag_list\">\n          <el-checkbox\n            v-for=\"(tag, index) in init_tag_list\"\n            :key=\"index\"\n            :label=\"tag.id\"\n            name=\"tag\"\n          >\n            <el-tag type=\"success\">{{ tag.tag_name }}</el-tag>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <mavon-editor v-model=\"form.content\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          :loading=\"isLoading\"\n          @click=\"publish\"\n        >提交</el-button>\n        <el-button\n          type=\"warning\"\n          :loading=\"save_draft_isLoading\"\n          @click=\"save_draft\"\n        >存草稿</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { createArticle } from '@/api/article'\nimport { getTagList } from '@/api/tag'\nexport default {\n  data() {\n    return {\n      init_tag_list: [],\n      isLoading: false,\n      save_draft_isLoading: false,\n      form: {\n        status: 2, // 1-发布，2-草稿，3-下架\n        title: '',\n        tag_list: [],\n        desc: '',\n        content: ''\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\n          {\n            min: 3,\n            max: 50,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        tag_list: [\n          {\n            type: 'array',\n            required: true,\n            message: '请至少选择一个标签',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.initTagList()\n  },\n  methods: {\n    initTagList() {\n      getTagList({ page: -1 }).then((response) => {\n        this.init_tag_list = response.data\n      })\n    },\n    publish() {\n      this.form.status = 1\n      this.submit()\n    },\n    save_draft() {\n      this.save_draft_isLoading = true\n      this.form.status = 2\n      this.submit()\n    },\n    submit() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.isLoading = true\n          createArticle(this.form).then((response) => {\n            this.tableData = response.data.id\n            this.isLoading = false\n            this.save_draft_isLoading = false\n            if (response.msg === '') {\n              this.$message({\n                showClose: true,\n                message: '操作成功',\n                type: 'success'\n              })\n              this.$router.go(0)\n            } else {\n              this.$message({\n                showClose: true,\n                message: response.msg,\n                type: 'warning'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.line {\n  text-align: center;\n}\n</style>\n\n"]}]}