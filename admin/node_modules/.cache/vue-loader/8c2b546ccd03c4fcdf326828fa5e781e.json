{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/edit.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1669962132195},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVkaXRBcnRpY2xlLCBkZXRhaWxBcnRpY2xlIH0gZnJvbSAnQC9hcGkvYXJ0aWNsZScKaW1wb3J0IHsgZ2V0VGFnTGlzdCB9IGZyb20gJ0AvYXBpL3RhZycKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgaW5pdF90YWdfbGlzdDogW10sCiAgICAgIGZvcm06IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgdGFnX2xpc3Q6IFtdLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIGNyZWF0ZV90aW1lOiAnJywKICAgICAgICB1cGRhdGVfdGltZTogJycsCiAgICAgICAgYXJ0aWNsZV9pZDogMCwKICAgICAgICBodG1sOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5rS75Yqo5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMywKICAgICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCAyMCDkuKrlrZfnrKYnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHRhZ19saXN0OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA5Liq5qCH562+JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUKICAgIHRoaXMuaW5pdFRhZ0xpc3QoKQogICAgdGhpcy5nZXREZXRhaWwodGhpcy4kcm91dGUucXVlcnkuaWQpCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0VGFnTGlzdCgpIHsKICAgICAgZ2V0VGFnTGlzdCh7IHBhZ2U6IDEgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmluaXRfdGFnX2xpc3QgPSByZXNwb25zZS5kYXRhCiAgICAgIH0pCiAgICB9LAogICAgZ2V0RGV0YWlsKGlkKSB7CiAgICAgIGRldGFpbEFydGljbGUoeyBhcnRpY2xlX2lkOiBOdW1iZXIoaWQpIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgIHRoaXMuZm9ybS5hcnRpY2xlX2lkID0gcmVzcG9uc2UuZGF0YS5pZAogICAgICAgIHRoaXMuZm9ybS50aXRsZSA9IHJlc3BvbnNlLmRhdGEudGl0bGUKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50YWdfbGlzdCAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLmZvcm0udGFnX2xpc3QgPSByZXNwb25zZS5kYXRhLnRhZ19saXN0CiAgICAgICAgfQogICAgICAgIHRoaXMuZm9ybS5jb250ZW50ID0gcmVzcG9uc2UuZGF0YS5jb250ZW50CiAgICAgICAgdGhpcy5mb3JtLmNyZWF0ZV90aW1lID0gcmVzcG9uc2UuZGF0YS5jcmVhdGVfdGltZQogICAgICAgIHRoaXMuZm9ybS51cGRhdGVfdGltZSA9IHJlc3BvbnNlLmRhdGEudXBkYXRlX3RpbWUKICAgICAgfSkKICAgIH0sCiAgICBvblN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgICAgICBlZGl0QXJ0aWNsZSh0aGlzLmZvcm0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT09ICcnKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmiJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n      <el-input v-show=\"false\" v-model=\"form.article_id\" />\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"form.title\" />\n      </el-form-item>\n      <el-form-item label=\"选择标签\">\n        <el-checkbox-group v-model=\"form.tag_list\">\n          <el-checkbox\n            v-for=\"(tag, index) in init_tag_list\"\n            :key=\"index\"\n            :label=\"tag.id\"\n            name=\"tag\"\n          >\n            <el-tag type=\"success\">{{ tag.tag_name }}</el-tag>\n          </el-checkbox>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"创建时间\">\n        <el-date-picker\n          v-model=\"form.create_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"最近更新时间\">\n        <el-date-picker\n          v-model=\"form.update_time\"\n          type=\"datetime\"\n          placeholder=\"选择日期时间\"\n        />\n      </el-form-item>\n      <el-form-item label=\"内容\">\n        <mavon-editor v-model=\"form.content\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          :loading=\"isLoading\"\n          @click=\"onSubmit\"\n        >提交</el-button>\n        <el-button>取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { editArticle, detailArticle } from '@/api/article'\nimport { getTagList } from '@/api/tag'\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      init_tag_list: [],\n      form: {\n        title: '',\n        tag_list: [],\n        content: '',\n        create_time: '',\n        update_time: '',\n        article_id: 0,\n        html: ''\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入活动名称', trigger: 'blur' },\n          {\n            min: 3,\n            max: 50,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        tag_list: [\n          {\n            type: 'array',\n            required: true,\n            message: '请至少选择一个标签',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    this.isLoading = true\n    this.initTagList()\n    this.getDetail(this.$route.query.id)\n  },\n  methods: {\n    initTagList() {\n      getTagList({ page: 1 }).then((response) => {\n        this.init_tag_list = response.data\n      })\n    },\n    getDetail(id) {\n      detailArticle({ article_id: Number(id) }).then((response) => {\n        this.isLoading = false\n        this.form.article_id = response.data.id\n        this.form.title = response.data.title\n        if (response.data.tag_list != null) {\n          this.form.tag_list = response.data.tag_list\n        }\n        this.form.content = response.data.content\n        this.form.create_time = response.data.create_time\n        this.form.update_time = response.data.update_time\n      })\n    },\n    onSubmit() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.isLoading = true\n          editArticle(this.form).then((response) => {\n            this.isLoading = false\n            if (response.data !== '') {\n              this.$message({\n                showClose: true,\n                message: response.data,\n                type: 'primary'\n              })\n            } else {\n              this.$message({\n                showClose: true,\n                message: '成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.line {\n  text-align: center;\n}\n</style>\n\n"]}]}