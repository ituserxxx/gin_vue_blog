{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/article/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/article/list.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1669962132195},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0QXJ0aWNsZUxpc3QsCiAgZHJhZnRBcnRpY2xlLAogIHB1Ymxpc2hBcnRpY2xlLAogIGRlbGV0ZUFydGljbGUKfSBmcm9tICdAL2FwaS9hcnRpY2xlJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0b3RhbDogMTAwLAogICAgICBzZWFyY2g6ICcnCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBnZXRBcnRpY2xlTGlzdCh7IHBhZ2U6IHRoaXMucGFnZSB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRQYWdlQ2hhbmdlKHBhZ2UpIHsKICAgICAgZ2V0QXJ0aWNsZUxpc3QoeyBwYWdlOiBwYWdlIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgLy8g57yW6L6R6Lez6L2sCiAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsKICAgICAgLy8g6YCa6L+HcHVzaOi/m+ihjOi3s+i9rAogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9hcnRpY2xlL2VkaXQnLAogICAgICAgIHF1ZXJ5OiB7IGlkOiByb3cuaWQgfQogICAgICB9KQogICAgfSwKICAgIC8vIOaWsOWinui3s+i9rAogICAgaGFuZGxlQWRkKCkgewogICAgICAvLyDpgJrov4dwdXNo6L+b6KGM6Lez6L2sCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2FydGljbGUvYWRkJwogICAgICB9KQogICAgfSwKICAgIC8vIOWtmOWFpeiNieeovwogICAgaGFuZGxlU2F2ZURyYWZ0KGluZGV4LCByb3cpIHsKICAgICAgY29uc3QgYXJ0aWNsZUluZm8gPSB7CiAgICAgICAgaWQ6IHJvdy5pZAogICAgICB9CiAgICAgIGRyYWZ0QXJ0aWNsZShhcnRpY2xlSW5mbykudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1zZyA/IHJlc3BvbnNlLm1zZyA6ICfmiJDlip8nCiAgICAgICAgfSkKICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUHVibGlzaEFydGljbGUoaW5kZXgsIHJvdykgewogICAgICBjb25zdCBhcnRpY2xlSW5mbyA9IHsKICAgICAgICBpZDogcm93LmlkCiAgICAgIH0KICAgICAgcHVibGlzaEFydGljbGUoYXJ0aWNsZUluZm8pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tc2cgPyByZXNwb25zZS5tc2cgOiAn5oiQ5YqfJwogICAgICAgIH0pCiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7CiAgICAgIGNvbnN0IGFydGljbGVJbmZvID0gewogICAgICAgIGFydGljbGVfaWQ6IHJvdy5pZAogICAgICB9CiAgICAgIGRlbGV0ZUFydGljbGUoYXJ0aWNsZUluZm8pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tc2cgPyByZXNwb25zZS5tc2cgOiAn5oiQ5YqfJwogICAgICAgIH0pCiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n      <el-button type=\"primary\" @click=\"handleAdd\">新增文章</el-button>\n    </el-row>\n\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column label=\"Id\" prop=\"id\" />\n      <el-table-column label=\"标题\" prop=\"title\" />\n      <el-table-column label=\"创建时间\" prop=\"create_time\" />\n      <el-table-column label=\"更新时间\" prop=\"update_time\" />\n      <el-table-column label=\"状态\" prop=\"status\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.status === 1\" type=\"success\">\n            已发布</el-tag>\n          <el-tag v-if=\"scope.row.status === 2\" type=\"warning\">\n            草稿\n          </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\" align=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          >编辑</el-button>\n\n          <el-button\n            v-if=\"scope.row.status == 1\"\n            size=\"mini\"\n            type=\"primary\"\n            @click=\"handleSaveDraft(scope.$index, scope.row)\"\n          >存草稿</el-button>\n\n          <el-button\n            v-if=\"scope.row.status == 2\"\n            size=\"medium\"\n            type=\"success\"\n            @click=\"handlePublishArticle(scope.$index, scope.row)\"\n          >发布</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      @current-change=\"handleCurrentPageChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport {\n  getArticleList,\n  draftArticle,\n  publishArticle,\n  deleteArticle\n} from '@/api/article'\n\nexport default {\n  data() {\n    return {\n      tableData: [],\n      total: 100,\n      search: ''\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getArticleList({ page: this.page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    handleCurrentPageChange(page) {\n      getArticleList({ page: page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    // 编辑跳转\n    handleEdit(index, row) {\n      // 通过push进行跳转\n      this.$router.push({\n        path: '/article/edit',\n        query: { id: row.id }\n      })\n    },\n    // 新增跳转\n    handleAdd() {\n      // 通过push进行跳转\n      this.$router.push({\n        path: '/article/add'\n      })\n    },\n    // 存入草稿\n    handleSaveDraft(index, row) {\n      const articleInfo = {\n        id: row.id\n      }\n      draftArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    },\n    handlePublishArticle(index, row) {\n      const articleInfo = {\n        id: row.id\n      }\n      publishArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    },\n    handleDelete(index, row) {\n      const articleInfo = {\n        article_id: row.id\n      }\n      deleteArticle(articleInfo).then((response) => {\n        this.$message({\n          type: 'success',\n          message: response.msg ? response.msg : '成功'\n        })\n        this.fetchData()\n      })\n    }\n  }\n}\n</script>\n"]}]}