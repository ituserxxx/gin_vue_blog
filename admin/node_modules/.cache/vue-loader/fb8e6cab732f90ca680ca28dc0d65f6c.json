{"remainingRequest":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/project/go/gin_vue_blog/admin/src/views/tag/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/project/go/gin_vue_blog/admin/src/views/tag/list.vue","mtime":1669962015063},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/babel-loader/lib/index.js","mtime":1669962132195},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1669962139821},{"path":"/data/project/go/gin_vue_blog/admin/node_modules/vue-loader/lib/index.js","mtime":1669962132659}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFRhZ0xpc3QsIGVkaXRUYWcsIGFkZFRhZywgZGVsVGFnIH0gZnJvbSAnQC9hcGkvdGFnJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0b3RhbDogMTAwLAogICAgICBzZWFyY2g6ICcnLAogICAgICBlZGl0VGFnTmFtZTogJycsCiAgICAgIGN1cnJfcGFnZTogMQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOWIneWni+WMluaVsOaNrgogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBnZXRUYWdMaXN0KHsgcGFnZTogdGhpcy5jdXJyX3BhZ2UgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50UGFnZUNoYW5nZShwYWdlKSB7CiAgICAgIHRoaXMuY3Vycl9wYWdlID0gcGFnZQogICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICB9LAogICAgaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsKICAgICAgY29uc3QgdGFnSW5mbyA9IHsKICAgICAgICBpZDogcm93LmlkCiAgICAgIH0KICAgICAgZGVsVGFnKHRhZ0luZm8pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhLnNwbGljZShpbmRleCwgMSkKICAgICAgfSkKICAgIH0sCiAgICAvLyDmlrDlop4KICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy4kcHJvbXB0KCcnLCAn6K+36L6T5YWl5qCH562+5ZCN56ewJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJwogICAgICB9KQogICAgICAgIC50aGVuKCh7IHZhbHVlIH0pID0+IHsKICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuI3og73kuLrnqbonCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB0YWdJbmZvID0gewogICAgICAgICAgICB0YWdfbmFtZTogdmFsdWUKICAgICAgICAgIH0KICAgICAgICAgIGFkZFRhZyh0YWdJbmZvKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKnycKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLy8g5Yi35paw6KGo5qC8CiAgICAgICAgICAgIGdldFRhZ0xpc3QoeyBwYWdlOiAxIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHt9KQogICAgfSwKICAgIC8vIOe8lui+kQogICAgaGFuZGxlRWRpdChpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuJHByb21wdCgnJywgJ+ivt+i+k+WFpeagh+etvuWQjeensCcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcKICAgICAgfSkKICAgICAgICAudGhlbigoeyB2YWx1ZSB9KSA9PiB7CiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5LiN6IO95Li656m6JwogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgY29uc3QgdGFnSW5mbyA9IHsKICAgICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgICAgdGFnX25hbWU6IHZhbHVlCiAgICAgICAgICB9CiAgICAgICAgICBlZGl0VGFnKHRhZ0luZm8pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5YqfJwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleF0udGFnX25hbWUgPSB2YWx1ZQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/tag","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row>\n      <el-button type=\"primary\" @click=\"handleAdd\">添加新标签</el-button>\n    </el-row>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column label=\"Id\" prop=\"id\" />\n      <el-table-column label=\"标签名称\" prop=\"tag_name\" />\n      <el-table-column label=\"文章数量\" prop=\"article_sum\" />\n      <el-table-column align=\"right\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"text\"\n            @click=\"handleEdit(scope.$index, scope.row)\"\n          >编辑</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.$index, scope.row)\"\n          >Delete</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      @current-change=\"handleCurrentPageChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport { getTagList, editTag, addTag, delTag } from '@/api/tag'\n\nexport default {\n  data() {\n    return {\n      tableData: [],\n      total: 100,\n      search: '',\n      editTagName: '',\n      curr_page: 1\n    }\n  },\n  created() {\n    // 初始化数据\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getTagList({ page: this.curr_page }).then((response) => {\n        this.tableData = response.data\n        this.listLoading = false\n      })\n    },\n    handleCurrentPageChange(page) {\n      this.curr_page = page\n      this.fetchData()\n    },\n    handleDelete(index, row) {\n      const tagInfo = {\n        id: row.id\n      }\n      delTag(tagInfo).then((res) => {\n        this.tableData.splice(index, 1)\n      })\n    },\n    // 新增\n    handleAdd() {\n      this.$prompt('', '请输入标签名称', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      })\n        .then(({ value }) => {\n          if (value === null || value === '') {\n            this.$message({\n              type: 'info',\n              message: '不能为空'\n            })\n          }\n          const tagInfo = {\n            tag_name: value\n          }\n          addTag(tagInfo).then((response) => {\n            this.$message({\n              type: 'success',\n              message: '成功'\n            })\n            // 刷新表格\n            getTagList({ page: 1 }).then((response) => {\n              this.tableData = response.data\n              this.listLoading = false\n            })\n          })\n        })\n        .catch(() => {})\n    },\n    // 编辑\n    handleEdit(index, row) {\n      this.$prompt('', '请输入标签名称', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      })\n        .then(({ value }) => {\n          if (value === null || value === '') {\n            this.$message({\n              type: 'info',\n              message: '不能为空'\n            })\n          }\n          const tagInfo = {\n            id: row.id,\n            tag_name: value\n          }\n          editTag(tagInfo).then((response) => {\n            this.$message({\n              type: 'success',\n              message: '成功'\n            })\n            this.tableData[index].tag_name = value\n          })\n        })\n        .catch(() => {})\n    }\n  }\n}\n</script>\n"]}]}